{1999/9 added to procedure visarga prep the words: punaH, mAtaH, kOsalyAmAtaH}{2000/9/4 changed procedure torli to insert sktnasalization before sktl rather than sktanunasika after it.}{2000/9/4 added line to procedure ahan to restrict it to compounds.  Did not insert "else if (Pada2 in Linend) then" to assume that clause-final ahan is not the noun.}{2000/9/4 added ahaH to visargaprep procedure.}{2000/10/14 disabled removal of space after upasargas (Removed "or Upasarga") and close sandhi option for upasargas.}{2000/10/22 removed from procedure visarga prep the word: 'antaH' added 'pitaH'}unit sandhiline;interface	uses		chararyroutines, transliterate, sandhiprep;	{transliterate declares the Sanskrit sound constants}	const		maxyatna = 11;		maxsthana = 5;		ikanthya = 1;		italavya = 2;		imurdhanya = 3;		idantya = 4;		iosthya = 5;		ihrasva = 1;		idirgha = 2;		iguna = 3;		ivrddhi = 4;		isparsa1 = 5;		isparsa2 = 6;		isparsa3 = 7;		isparsa4 = 8;		isparsa5 = 9;		iantahstha = 10;		iusmana = 11;		ru = 's';		pradimax = 20;		iapi = 13;	{api usually is not an upasarga so check it separately}	type		yatnatype = 0..maxyatna;		sthanatype = 0..maxsthana;	var		Avarna, Ivarna, Uvarna, Rvarna, Lvarna, Ku, Cu, Retrotu, Tu, Pu: set of char;		An, Ak, Ac, An2, At, Am, Al, Asch, Ik, Ic, In2, Uk, Ekn, Ec, Aic: set of char;		Khay, Khar, KNam, Cay, Car, Chav, Jasch, Jhay, Jhar, Jhal, Jhasch, Jhash, Basch, Bhash: set of char;		May, Yacn, Yan, Yam, Yay, Yar, Ral, Val, Vasch, Schar, Schal, Hasch, Hal: set of char;		Guna, Vrddhi: set of char;		Sounds, Linend: set of char;		Soundary: array[1..maxsthana, 1..maxyatna] of char;		Pradi: array[1..pradimax] of string[5];	var		PurvaPada, Pada1, NxtPada1, Pada2: padatype;		Padbound: char;		Despace, EkahPurvaParayoh: boolean;	{Despace set in sandhioptions}		Upasarga, NoStoh, NoKNam, Exception, Pronoun: boolean;	{for sandhiPrep}		External, Chandas, CloseUpasargaSandhi, TukPadantat, ScharSchari, XkXpKupvoh, ChAti, ParaSavarna, Anunasika: boolean;	{Sandhi Options}	procedure sandhioptions;	procedure aksarasamamnaya;	procedure gana;	procedure sandhi (var Linary: linetype; FldChr: char);implementation	procedure sandhioptions;		var			Answer: string;			Yes, No: set of char;	begin	Yes := ['Y', 'y'];	No := ['N', 'n'];	Answer := '';	External := false;	Compound := false;	Chandas := false;	CloseUpasargaSandhi := false;	TukPadantat := false;	{6.1.76.  padAntAdvA (dIrghAt 75, che 73, tuk 71)}	ScharSchari := false;	{8.3.36.  vA Sari}	XkXpKupvoh := false;	{8.3.37.  kupvoH XkXpau ca.}	ChAti := false;	{8.4.63.  SaS cho 'wi. (jhayaH 62, anyatarasyAm 62}	ParaSavarna := false;	{8.4.59.  vA padAntasya (anusvArasya yayi parasavarRaH 58).}	Anunasika := false;	{8.4.45.  yaro 'nunAsike 'nunAsiko vA. (padAnta 42)}	Despace := false;	hideall;	showtext;	writeln('Do you want to do sandhi within compounds (at hyphens)');	writeln('or external (at spaces)?');	writeln('     C/c for compound');	writeln('     E/e for external');	write('     Any other character to quit: ');	readln(Answer);	if Answer = '' then		Answer := '?';	if Answer[1] in ['C', 'c'] then begin		Compound := true;		Padbound := hyphen;		end	else if Answer[1] in ['E', 'e'] then begin		External := true;		Padbound := space;		end	else begin	{neither so quit}		Error := 4;		exit(sandhioptions);		end;	writeln('Is this a Vedic text (chandas)?');	write('Default no: ');	readln(Answer);	if Answer = '' then		Answer := '?';	if Answer[1] in Yes then		Chandas := true;	writeln('Do you want to exercise close sandhi options?');	writeln('"N" or "n" to decline');	writeln('"Y" or "y" to accept');	writeln('"S" or "s" to follow standard editorial practice');	write('Any other character to select options individually: ');	readln(Answer);	if Answer = '' then		Answer := '?';	if Answer[1] in Yes then begin		TukPadantat := true;	{6.1.76.  padAntAdvA (dIrghAt 75, che 73, tuk 71)}		ScharSchari := true;	{8.3.36.  vA Sari}		XkXpKupvoh := true;	{8.3.37.  kupvoH XkXpau ca.}		ChAti := true;	{8.4.63.  SaS cho 'Ti. (jhayaH 62, anyatarasyAm 62}		ParaSavarna := true;	{8.4.59.  vA padAntasya (anusvArasya yayi parasavarRaH 58).}		Anunasika := true;	{8.4.45.  yaro 'nunAsike 'nunAsiko vA. (padAnta 42)}		end	else if Answer[1] in No then	{No close sandhi, logicals remain false}	else if Answer[1] in ['S', 's'] then	{Standard editorial practice}		if Compound then begin	{Close sandhi within compounds}			TukPadantat := true;	{6.1.76.  padAntAdvA (dIrghAt 75, che 73, tuk 71)}			ScharSchari := true;	{8.3.36.  vA Sari}	{technically, 8.3.37 should also apply but it is never seen}			ChAti := true;	{8.4.63.  SaS cho 'wi. (jhayaH 62, anyatarasyAm 62}			ParaSavarna := true;	{8.4.59.  vA padAntasya (anusvArasya yayi parasavarRaH 58).}			Anunasika := true;	{8.4.45.  yaro 'nunAsike 'nunAsiko vA. (padAnta 42)}	{display standard editorial practice for compound sandhi}			writeln('The optional sandhi in the following sutras will apply:');			if TukPadantat then				writeln('     6.1.76.  padAntAdvA (dIrghAt 75, che 73, tuk 71).');			if ScharSchari then				writeln('     8.3.36.  vA Sari.');			if XkXpKupvoh then				writeln('     8.3.37.  kupvoH XkXpau ca.');			if ChAti then				writeln('     8.4.63.  SaS cho ''wi. (jhayaH 62, anyatarasyAm 62 ) . ');			if ParaSavarna then				writeln('     8.4.59.  vA padAntasya (anusvArasya yayi parasavarRaH 58).');			if Anunasika then				writeln('     8.4.45.  yaro ''nunAsike ''nunAsiko vA. (padAnta 42)');			end	{Close sandhi within compounds}		else begin	{External: 8.4.63 and 8.4.45}			ChAti := true;	{8.4.63.  SaS cho 'Ti. (jhayaH 62, anyatarasyAm 62}			Anunasika := true;	{8.4.45.  yaro 'nunAsike 'nunAsiko vA. (padAnta 42)}			writeln('The optional sandhi in the following sutras will apply:');			writeln('     8.4.45.  yaro ''nunAsike ''nunAsiko vA. (padAnta 42)');			writeln('     8.4.63.  SaS cho ''wi. (jhayaH 62, anyatarasyAm 62 ) . ');{disabled Close sandhi between upasargas and their following verb forms}{CloseUpasargaSandhi := true;}{writeln('Close sandhi will be observed between upasargas and their following verb forms');}{writeln('After the upasarga ''sam'',');}{writeln('     8.4.59.  vA padAntasya (anusvArasya yayi parasavarRaH 58).');}			end	{External.  End of standard editorial practice}	else begin	{peruse options}		writeln('Choose sandhi options ("Y" or "y" to accept):');		writeln('6.1.76.  padAntAdvA (dIrghAt 75, che 73, tuk 71).');		write('     Pada final long vowel augmented with c before ch ? ');		readln(Answer);		if Answer = '' then			Answer := '?';		if Answer[1] in Yes then			TukPadantat := true;		writeln('8.3.36.  vA Sari.');		write('     H -> S, z or s before palatal, retroflex or dental stop respectively? ');		readln(Answer);		if Answer = '' then			Answer := '?';		if Answer[1] in Yes then			ScharSchari := true;		writeln('8.3.37.  kupvoH XkXpau ca.');		write('     H-> jihvamuliya, upadhmaniya before gutteral or labial stop respectively? ');		readln(Answer);		if Answer = '' then			Answer := '?';		if Answer[1] in Yes then			XkXpKupvoh := true;		writeln('8.4.63.  SaS cho ''wi . (jhayaH 62, anyatarasyAm 62');		write('     S -> ch after stops ? ');		readln(Answer);		if Answer = '' then			Answer := '?';		if Answer[1] in Yes then			ChAti := true;		writeln('8.4.59.  vA padAntasya (anusvArasya yayi parasavarRaH 58).');		write('     AnusvAra -> stop homogenous with following stop? ');		readln(Answer);		if Answer = '' then			Answer := '?';		if Answer[1] in Yes then			ParaSavarna := true;		writeln('8.4.45.  yaro ''nunAsike ''nunAsiko vA. (padAnta 42)');		writeln('(At present the program does not handle nasalized semivowels)');		writeln('(which, though rarely found in editions, go with this sandhi.)');		write('     Stops -> corresponding nasal before a nasal? ');		readln(Answer);		if Answer = '' then			Answer := '?';		if Answer[1] in Yes then			Anunasika := true;		if not ParaSavarna or not Anunasika then begin			write(' Do you want to observe close sandhi after upasargas ? ');			readln(Answer);			if Answer = '' then				Answer := '?';			if Answer[1] in Yes then				CloseUpasargaSandhi := true;			end;		writeln('The optional sandhi in the following sutras will apply:');		if TukPadantat then			writeln('     6.1.76.  padAntAdvA (dIrghAt 75, che 73, tuk 71).');		if ScharSchari then			writeln('     8.3.36.  vA Sari.');		if XkXpKupvoh then			writeln('     8.3.37.  kupvoH XkXpau ca.');		if ChAti then			writeln('     8.4.63.  SaS cho ''wi. (jhayaH 62, anyatarasyAm 62 ) . ');		if ParaSavarna then			writeln('     8.4.59.  vA padAntasya (anusvArasya yayi parasavarRaH 58).');		if Anunasika then			writeln('     8.4.45.  yaro ''nunAsike ''nunAsiko vA. (padAnta 42)');		if CloseUpasargaSandhi then begin	{close upasarga sandhi}			writeln('Close sandhi will be observed after upasargas');			if not ParaSavarna then begin				writeln('After the upasarga ''sam'',');				writeln('     8.4.59.  vA padAntasya (anusvArasya yayi parasavarRaH 58).');				end;			if not Anunasika then begin				writeln('After the upasarga ''ud'',');				writeln('     8.4.45.  yaro ''nunAsike ''nunAsiko vA. (padAnta 42)');				end;			end;	{close upasarga sandhi}		end;	{peruse options}{Choose spacing options}	if Compound then		writeln('Hyphens will be deleted between compound elements.')	else if External then begin {spaceoptions}		writeln('Spaces will be deleted where a single vowel replaces final and initial vowels.');		writeln('Do you wish to eliminate spaces between prefixes and verbs');		writeln('and between final consonants and a following sound?');		write('Y/y (yes) to delete spaces, any other character to keep.');		readln(Answer);		if Answer = '' then			Answer := '?';		if Answer[1] in Yes then			Despace := true;		end;	{spaceoptions}	end;	{sandhioptions}	procedure aksarasamamnaya;	begin{load the sets}	Avarna := [skta, sktaa];	Ivarna := [skti, sktii];	Uvarna := [sktu, sktuu];	Rvarna := [sktri, sktrii];	Lvarna := [sktlri, sktlrii];	Ku := [sktk, sktkh, sktg, sktgh, sktkn];	Cu := [sktc, sktch, sktj, sktjh, sktcn];	Retrotu := [sktretrot, sktretroth, sktretrod, sktretrodh, sktretron];	Tu := [sktt, sktth, sktd, sktdh, sktn];	Pu := [sktp, sktph, sktb, sktbh, sktm];	An := Avarna + Ivarna + Uvarna;	Ak := Avarna + Ivarna + Uvarna + Rvarna + Lvarna;	Ik := Ivarna + Uvarna + Rvarna + Lvarna;	Uk := Uvarna + Rvarna + Lvarna;	Ekn := [skte, skto];	Ec := [skte, skto, sktai, sktau];		{dipthongs}	Aic := [sktai, sktau];	Ac := Ak + Ec;	Ic := Ac - Avarna;	At := Ac + [skth, skty, sktv, sktr];	Yan := [skty, sktv, sktr, sktl];	{semivowels}	An2 := Ac + [skth] + Yan;	{vowels, h and semivowels}	In2 := An2 - Avarna;	Yam := [skty, sktv, sktr, sktl, sktcn, sktm, sktkn, sktretron, sktn];	{semivowels and nasals}	Am := Ac + [skth] + Yam;	{vowels, semivowels, nasals and h}	KNam := [sktkn, sktretron, sktn];	Yacn := Yam + [sktjh, sktbh];	Jhash := [sktjh, sktbh, sktgh, sktretrodh, sktdh];	{voiced aspirated stops}	Bhash := [sktbh, sktgh, sktretrodh, sktdh];	{voiced aspirated stops other than jh}	Jasch := [sktj, sktb, sktg, sktretrod, sktd];	{unvoiced unaspirated stops}	Basch := [sktb, sktg, sktretrod, sktd];	{unvoiced unaspirated stops other than j}	Jhasch := [sktjh, sktbh, sktgh, sktretrodh, sktdh, sktj, sktb, sktg, sktretrod, sktd];	{voiced stops}	Hasch := [skth] + Yam + Jhasch;	{voiced consonants}	Vasch := Hasch - [skth, skty];	{voiced consonants other than h and y}	Asch := Ac + Hasch;	{voiced sounds}	Chav := [sktch, sktretroth, sktth, sktc, sktretrot, sktt];	Khay := [sktkh, sktph, sktch, sktretroth, sktth, sktc, sktretrot, sktt, sktk, sktp];	{unvoiced stops}	Jhay := Jhasch + khay;	{non-nasal stops both voiced and unvoiced}	Yay := Yam + Jhay;	{semivowels and stops}	May := [sktm, sktkn, sktretron, sktn] + Jhay;	{stops other than palatal n}	Cay := [sktc, sktretrot, sktt, sktk, sktp];	Khar := [sktkh, sktph, sktch, sktretroth, sktth, sktc, sktretrot, sktt, sktk, sktp, sktsch, sktsh, skts];	{unvoiced sounds}	Car := [sktc, sktretrot, sktt, sktk, sktp, sktsch, sktsh, skts];	Schar := [sktsch, sktsh, skts];	{unvoiced sylibants}	Jhar := Jhay + Schar;		{non-nasal stops and unvoiced silibants}	Yar := Yam + Jhay + Schar;	{semivowels, stops and unvoiced silibants (consonants other than h)}	Schal := [sktsch, sktsh, skts, skth];	Jhal := Jhay + Schal;	{non-nasal stops and silibants}	Hal := [skty, sktv, sktr, sktl, sktcn, sktm, sktkn, sktretron, sktn, sktjh, sktbh, sktgh, sktretrodh, sktdh, sktj, sktb, sktg, sktretrod, sktd, sktkh, sktph, sktch, sktretroth, sktth, sktc, sktretrot, sktt, sktk, sktp, sktsch, sktsh, skts, skth];	Ral := Hal - [skty, sktv];	{consonants other than y and v}	Val := Hal - [skty];		{consonants other than y}	Al := Ac + hal;	{all independent sounds}	Guna := [skta, skte, skto];	Vrddhi := [sktaa, sktai, sktau];	Sounds := Al + [sktvisarga, sktanusvara];	Linend := [space, comma, semicolon, colon, period];{load the array Soundary}	Soundary[ikanthya, ihrasva] := skta;	Soundary[ikanthya, idirgha] := sktaa;	Soundary[ikanthya, iguna] := skta;	Soundary[ikanthya, ivrddhi] := sktaa;	Soundary[ikanthya, isparsa1] := sktk;	Soundary[ikanthya, isparsa2] := sktkh;	Soundary[ikanthya, isparsa3] := sktg;	Soundary[ikanthya, isparsa4] := sktgh;	Soundary[ikanthya, isparsa5] := sktkn;	Soundary[ikanthya, iantahstha] := skth;	Soundary[ikanthya, iusmana] := sktjihvamuliya;	Soundary[italavya, ihrasva] := skti;	Soundary[italavya, idirgha] := sktii;	Soundary[italavya, iguna] := skte;	Soundary[italavya, ivrddhi] := sktai;	Soundary[italavya, isparsa1] := sktc;	Soundary[italavya, isparsa2] := sktch;	Soundary[italavya, isparsa3] := sktj;	Soundary[italavya, isparsa4] := sktjh;	Soundary[italavya, isparsa5] := sktcn;	Soundary[italavya, iantahstha] := skty;	Soundary[italavya, iusmana] := sktsch;	Soundary[imurdhanya, ihrasva] := sktri;	Soundary[imurdhanya, idirgha] := sktrii;	Soundary[imurdhanya, iguna] := skta;	Soundary[imurdhanya, ivrddhi] := sktaa;	Soundary[imurdhanya, isparsa1] := sktretrot;	Soundary[imurdhanya, isparsa2] := sktretroth;	Soundary[imurdhanya, isparsa3] := sktretrod;	Soundary[imurdhanya, isparsa4] := sktretrodh;	Soundary[imurdhanya, isparsa5] := sktretron;	Soundary[imurdhanya, iantahstha] := sktr;	Soundary[imurdhanya, iusmana] := sktsh;	Soundary[idantya, ihrasva] := sktlri;	Soundary[idantya, idirgha] := sktlrii;	Soundary[idantya, iguna] := skta;	Soundary[idantya, ivrddhi] := sktaa;	Soundary[idantya, isparsa1] := sktt;	Soundary[idantya, isparsa2] := sktth;	Soundary[idantya, isparsa3] := sktd;	Soundary[idantya, isparsa4] := sktdh;	Soundary[idantya, isparsa5] := sktn;	Soundary[idantya, iantahstha] := sktl;	Soundary[idantya, iusmana] := skts;	Soundary[iosthya, ihrasva] := sktu;	Soundary[iosthya, idirgha] := sktuu;	Soundary[iosthya, iguna] := skto;	Soundary[iosthya, ivrddhi] := sktau;	Soundary[iosthya, isparsa1] := sktp;	Soundary[iosthya, isparsa2] := sktph;	Soundary[iosthya, isparsa3] := sktb;	Soundary[iosthya, isparsa4] := sktbh;	Soundary[iosthya, isparsa5] := sktm;	Soundary[iosthya, iantahstha] := sktv;	Soundary[iosthya, iusmana] := sktupadhmaniya;	end;	{aksarasamamnaya}	procedure gana;	begin	Pradi[1] := 'pra';	Pradi[2] := 'parA';	Pradi[3] := 'apa';	Pradi[4] := 'sam';	Pradi[5] := 'anu';	Pradi[6] := 'ava';	Pradi[7] := 'nis';	Pradi[8] := 'dus';	Pradi[9] := 'vi';	Pradi[10] := 'A';	Pradi[11] := 'ni';	Pradi[12] := 'aDi';	Pradi[13] := 'api';	Pradi[14] := 'ati';	Pradi[15] := 'su';	Pradi[16] := 'ud';	Pradi[17] := 'aBi';	Pradi[18] := 'prati';	Pradi[19] := 'pari';	Pradi[20] := 'upa';	end;	procedure sandhi;{locate the next pada boundary}{identify the pada-final and pada-initial sounds}{check the conditions and call the proper routines to do the sandhi}		label			7000;		const			pratipadmax = 20;	{Maximum length assumed for lexical items}		var			Isthana1, Isthana2: sthanatype;			Iyatna1, Iyatna2: yatnatype;			IEnd: lenrange0;			Inext, Inextsp, IPrev, IPrevSpace, Index, I: lenrangeE;			Found, NoSpace, Dhralopa: boolean;			OtherCloseSandhi, Pragrhya, Uttarapada, NxtUttarapada: boolean;		procedure identify (aksara: char; var Isthana: sthanatype; var Iyatna: yatnatype);{Searches the two dimensional sound array Soundary for the character passed in aksara.}{Returns its position in the index variables Isthana and Iyatna.  If not found Isthana and Iyatna =0.}			label				1000;			var				I1: sthanatype;				I2: yatnatype;				Found: boolean;		begin		Isthana := 0;		Iyatna := 0;		Found := false;		for I1 := 1 to maxsthana do			for I2 := 1 to maxyatna do				if aksara = Soundary[I1, I2] then begin					Found := true;					goto 1000;					end;1000:		if Found then begin			Isthana := I1;			Iyatna := I2;			end;		end;	{identify}		procedure rlvarnayormithahsavarnyam;	{1.1.9 vt. fkAraÂkArayoH savarRavidhiH}		begin		if (Linary[Index - 1] in Rvarna + Lvarna) and (Linary[Index + 1] in Rvarna + Lvarna) then begin			Linary[Index - 1] := sktri;			Linary[Index + 1] := sktri;			Isthana1 := imurdhanya;			Isthana2 := imurdhanya;			end;		end;	{rlvarnayormithahsavarnyam}		procedure akahsavarnedirghah;	{6.1.101.  akaH savafRe dIrghaH}		begin		Linary[Index - 1] := Soundary[Isthana1, idirgha];		deletary(Linary, Index + 1);	{6.1.84.  ekaH pUrvaparayoH}		EkahPurvaParayoh := true;		end;	{akahsavarnedirghah}		procedure vrddhireci;	{6.1.88.  vfddhir eci}		begin		Linary[Index - 1] := Soundary[Isthana2, ivrddhi];		deletary(Linary, Index + 1);	{6.1.84.  ekaH pUrvaparayoH}		EkahPurvaParayoh := true;		end;	{vrddhireci}		procedure adgunah;	 {6..1.87.  Ad guRaH}		begin		Linary[Index - 1] := Soundary[Isthana2, iguna];		case Isthana2 of		italavya, iosthya: 			deletary(Linary, Index + 1);	{6.1.84.  ekaH pUrvaparayoH}		imurdhanya: 			Linary[Index + 1] := sktr;	{1.1.51.  uraR raparaH}		idantya: 			Linary[Index + 1] := sktl;		end;		EkahPurvaParayoh := true;		end;	{adgunah}		procedure ikoyanaci;	 {6.1.77.  iko yaR aci}		begin		Linary[Index - 1] := Soundary[Isthana1, iantahstha];		end;	{ikoyanaci}		procedure enahpadantadati;	{6.1.109.  eNaH padAntAd ati}		begin		Linary[Index + 1] := sktavagraha;		end;	{enahpadantadati}		procedure ecoyavayavah;	{6.1.78.  eco 'yavAyAvaH}		begin		case Linary[Index - 1] of		skte:  begin			Linary[Index - 1] := skta;			insertary(skty, Linary, Index, NoSpace)			end;		skto:  begin			Linary[Index - 1] := skta;			insertary(sktv, Linary, Index, NoSpace)			end;		sktai:  begin			Linary[Index - 1] := sktaa;			insertary(skty, Linary, Index, NoSpace)			end;		sktau:  begin			Linary[Index - 1] := sktaa;			insertary(sktv, Linary, Index, NoSpace)			end;		end;		if NoSpace then begin			Error := 2;			exit(sandhi);			end;		Index := Index + 1;		end;	{ecoyavayavah}		procedure acsandhi;		begin		rlvarnayormithahsavarnyam;		if (Linary[Index - 1] in Ak) then			if (Linary[Index + 1] in Ak) and (Isthana1 = Isthana2) then				akahsavarnedirghah	{6.1.101.  akaH savafRe dIrghaH}			else if (Linary[Index - 1] in Avarna) then	{and Linary[Index+1] not in Avarna}				if Linary[Index + 1] in Ec then					vrddhireci		{6.1.88  vfddhir eci}				else	{Linary[Index+1] in Ik}					adgunah	{6.1.87  Ad guRaH}			else	{Linary[Index-1] in Ik and not savarna with Linary[Index+1]}				ikoyanaci {6.1.77.  iko yaR aci}		else {Linary[Index-1] in Ec}			if (Linary[Index - 1] in Ekn) and (Linary[Index + 1] = skta) then				enahpadantadati {6.1.109.  eNaH padAntAd ati}			else	{(Linary[Index-1] in Ec) and (Linary[Index+1] in Ac)}				ecoyavayavah;	{6.1.78.  eco 'yavAyAvaH}		end;	{acsandhi}		procedure visargaprep;		begin		if (Pada1 = 'ahaH') or (Pada1 = 'svaH') or (Pada1 = 'pitaH') or (Pada1 = 'prAtaH') or (Pada1 = 'punaH') or (Pada1 = 'mAtaH') or (Pada1 = 'kOsalyAmAtaH') or (Pada1 = 'sanutaH') or (Pada1 = 'catuH') or (Pada1 = 'prAduH') then begin			Linary[Index - 1] := sktr;			Pada1[length(Pada1)] := sktr;			end		else begin			Linary[Index - 1] := skts;			if Pada1 <> '' then				Pada1[length(Pada1)] := skts;			end;		end;		procedure checa;	{6.1.73.  che ca (tuk 71)}		begin		if (Linary[Index + 1] = sktch) and (Iyatna1 = ihrasva) then begin			insertary(sktt, Linary, Index, NoSpace);			if NoSpace then begin				Error := 2;				exit(sandhi);				end;			Index := Index + 1;			end;		end;	{checa}		procedure anmanosca;	{6.1.74.  ANmANoSca (che 73, tuk 71)}		begin	{you'll have to add the condition that these are AN and mAN when that info is available}		if (Linary[Index + 1] = sktch) and ((Pada1 = 'A') or (Pada1 = 'mA')) then begin			insertary(sktt, Linary, Index, NoSpace);			if NoSpace then begin				Error := 2;				exit(sandhi);				end;			Index := Index + 1;			end;		end;	{anmanosca}		procedure padantadva;	{6.1.76.  padAntAdvA (dIrghAt 75, che 73, tuk 71)}		begin		identify(Linary[Index - 1], Isthana1, Iyatna1);	{don't want to do it if anmanosca just applied}		if (Linary[Index + 1] = sktch) and (Iyatna1 = idirgha) then begin			insertary(sktt, Linary, Index, NoSpace);			if NoSpace then begin				Error := 2;				exit(sandhi);				end;			Index := Index + 1;			end;		end;	{padantadva}		procedure etattadohsulopo;	{6.1.132.  etattadoH sulopo 'kor anaYsamAse hali}		begin		if ((Pada1 = 'sas') or (Pada1 = 'ezas')) and (Linary[Index + 1] in Hal) then begin			deletary(Linary, Index - 1);			Index := Index - 1;			end;		end;	{etattadohsulopo}		procedure jhalamjasonte;	{8.2.39.  jhalAM jaSo 'nte}		begin		identify(Linary[Index - 1], Isthana1, Iyatna1);		if (Linary[Index - 1] in Jhal - [ru]) then	{because ru=skts; I could choose another character}			Linary[Index - 1] := Soundary[Isthana1, isparsa3];		end;	{jhalamjasonte}		procedure sasajusoruh;	{8.2.66.  sasajuzo ruH}		{exception to 8.2.39 so must apply before it}		begin		if Index > 5 then			if substrary(Linary, Index - 5, Index - 1) = 'sajuz' then				Linary[Index - 1] := ru;		if Linary[Index - 1] = skts then			Linary[Index - 1] := ru;		end;	{sasajusoruh}		procedure ahan;	{8.2.68.  ahan}		begin		if Compound then			if Pada1 = 'ahan' then				if (Pada2 = 'rUpa') or (Pada2 = 'rAtri') or (Pada2 = 'rAtra') or (Pada2 = 'rAtre') or (Pada2 = 'rAtrARAm') or (Pada2 = 'raTantara') then					Linary[Index - 1] := ru	{vArttika, but had to add rAtra 21045, rAtre 24028, rAtrARAm 33137}{if ahan is termed pada and Pada2 in Sup, so that Linary[Index+1]=sktbh or skts, ditto}				else					Linary[Index - 1] := sktr;	{8.2.69.  ro 'supi}		end;		procedure amnarudharavar;	{8.2.70.  amnarUdharavarityubhayathA chandasi}		begin		if chandas then			if (Pada1 = 'amnas') or (Pada1 = 'UDas') or (Pada1 = 'avas') then				Linary[index - 1] := sktr;	{actually you get it both ways in chandas, ru too}		end;		procedure atororhasica;	{6.1.113.  ato ror aplutad aplute.  6.1.114.  haSi ca}		begin		if Index > 2 then			if (Linary[Index - 2] = skta) and (Linary[Index - 1] = ru) then				if Linary[Index + 1] in Hasch + [skta] then begin					Linary[Index - 2] := skto;	{Linary[Index-1:=sktu; adguna}					deletary(Linary, Index - 1);					Index := Index - 1;					end;		end;	{atororhasica}		procedure naschavyaprasan;	{8.3.7.  naS chavy apraSAn}		begin		if (Linary[Index - 1] = sktn) and (Linary[Index + 1] in Chav) and (Pada1 <> 'praSAn') then begin			Linary[Index - 1] := ru;			insertary(sktanusvara, Linary, Index - 1, NoSpace);	{8.3.4.  anunAsikAt paro 'nusvAraH}			if NoSpace then begin				Error := 2;				exit(sandhi);				end;			Index := Index + 1;			end;		end;	{naschavyaprasan}		procedure rori (var Dhralopa: boolean);	{8.3.14.  ro ri}		begin		Dhralopa := false;		if (Linary[Index - 1] in [sktr, ru]) and (Linary[Index + 1] = sktr) then begin			deletary(Linary, Index - 1);			Index := Index - 1;			Dhralopa := true;			end;		end;	{rori}		procedure dhralope;	{6.3.111.  qhralope pUrvasya dIrgho 'RaH}		begin		if Dhralopa then begin			identify(Linary[Index - 1], Isthana1, Iyatna1);			if (Linary[Index - 1] in An) and (Iyatna1 = ihrasva) then				Linary[Index - 1] := Soundary[Isthana1, idirgha];			end;		end;	{dhralope}		procedure bhobhago;	{8.3.17.  bhobhagoaghoapUrvasya yo 'Si}		begin		if (Linary[Index + 1] in Asch) and (Index > 2) then			if (Pada1 = 'bhos') or (Pada1 = 'bhagos') or (Pada1 = 'aghos') or ((Linary[Index - 2] in Avarna) and (Linary[Index - 1] = ru)) then				Linary[Index - 1] := skty;		end;	{bhobhago}		procedure kharavasanayor;	{8.3.15.  kharavasAnayor visarjanIyaH}		begin		if (Linary[Index - 1] in [sktr, ru]) then			if (Linary[Index + 1] in Khar + Linend) then				Linary[Index - 1] := sktvisarga			else				Linary[Index - 1] := sktr;		end;	{kharavasanayor}		procedure lopahsakalyasya;	{8.3.19.  lopaH SAkalyasya}		begin		if (Linary[Index + 1] in Asch) and (Index > 2) then			if ((Linary[Index - 2] in Avarna) and (Linary[Index - 1] = skty)) then begin				deletary(Linary, Index - 1);				Index := Index - 1;				end;		end;	{lopahsakalyasya}		procedure otogargyasya;	{8.3.20.  oto gArgyasya}		begin		if (Linary[Index + 1] in Asch) then			if ((Pada1 = 'bhos') or (Pada1 = 'bhagos') or (Pada1 = 'aghos')) then begin				deletary(Linary, Index - 1);				Index := Index - 1;				end		end;	{oto gargyasya}		procedure monusvarah;	{8.3.23.  mo 'nusvAraH}		begin		if (Linary[Index - 1] = sktm) and (Linary[Index + 1] in Hal) then			Linary[Index - 1] := sktanusvara;		end;	{monusvarah}		procedure namohrasvad;	{8.3.32.  Namo hrasvAd aci NamuR nityam}			var				Sthana: sthanatype;				Yatna: yatnatype;		begin		if (Index > 2) then begin			identify(Linary[Index - 2], Sthana, Yatna);			if (Yatna = ihrasva) and (Linary[Index - 1] in KNam) and (Linary[Index + 1] in Ac) then begin				insertary(Soundary[ISthana1, isparsa5], Linary, Index, NoSpace);				if NoSpace then begin					Error := 2;					exit(sandhi);					end;				Index := Index + 1;				end;			end;		end;	{namohrasvad}		procedure visarjaniyasyasah;	{8.3.34.  visarjanIyasya saH}			var				Apavada: boolean;		begin		if (Linary[Index - 1] = sktvisarga) and (Linary[Index + 1] in Khar) then begin			Apavada := false;			if (Index + 2 < linmax) then				if (Linary[Index + 2] in Schar) then					Apavada := true;	{8.3.35.  Sarpare visarjanIyaH.}			if (Linary[Index + 1] in Ku + Pu + Schar) then				Apavada := true;	{8.3.36.  vA Sari.  8.3.37.  kupvoH XkXpau ca.}			if not Apavada then				Linary[Index - 1] := skts;			end;		end;	{visarjaniyasyasah}		procedure vasari;	{8.3.36.  vA Sari}		begin		if (Linary[Index - 1] = sktvisarga) and (Linary[Index + 1] in Schar) then			Linary[Index - 1] := skts;		end;	{vasari}		procedure kupvohXkXpau;	{8.3.37.  kupvoH XkXpau ca (khari 15).}	{8.3.41, 8.3.45 and 8.3.46 are apavAdas of this so must precede it.}			var				Apavada: boolean;		begin	{by 8.3.15, kharavasAnayorvisarjanIyaH, visarga occurs before avasAna too.  but Xk and Xp don't.}		if (Linary[Index - 1] = sktvisarga) and (Linary[Index + 1] in Khar) then begin	{Hence, khari is understood here too}			Apavada := false;			if (Index + 2 < linmax) then				if (Linary[Index + 2] in Schar) then					Apavada := true;	{8.3.35.  Sarpare visarjanIyaH.}			if not Apavada then				if (Linary[Index + 1] in Ku) then					Linary[Index - 1] := sktjihvamuliya				else if (Linary[Index + 1] in Pu) then					Linary[Index - 1] := sktupadhmaniya;			end;		end;	{kupvohXkXpau}		procedure idudupadhasya;	{8.3.41.  idudupadhasya cApratyayasya (kupvoH 37, iRaH zaH 39}{exception to 8.3.36.  kupvoH XkaXpau ca, which is an exception to 8.3.34. visarjanIyasya saH,}{so should accompany procedure visarjaniyasyasah.  Must follow 8.3.15.  kharavasAnayor visarjanIyaH}		begin		if (Linary[Index - 1] = sktvisarga) and (Linary[Index + 1] in Ku + Pu) then			if (Pada1 = 'nis') or (Pada1 = 'dus') or (Pada1 = 'bahis') or (Pada1 = 'Avis') or (Pada1 = 'catur') or (Pada1 = 'prAdur') then				Linary[Index - 1] := sktsh;	{bahis, Avis=exception to 8.3.46}		end;		procedure nityamsamase;	{8.3.45. nityamsamAse 'nutarapadasthasya}		begin		if Compound then			if (Linary[Index - 1] = sktvisarga) and (Linary[Index + 1] in Ku + Pu) and (Index > 2) then				if ((Linary[Index - 2] = skti) or (Linary[Index - 2] = sktu)) and not Uttarapada then	{Pada1­u.p.}					Linary[Index - 1] := sktsh;		end;	{nityamsamase}		procedure atahkrkamikamsa;	{8.3.46.  ataH kfkamikaMsakumbhapAtrakuSAkarRIzvanavyayasya (samAse 45)}		begin		if Compound then			if (Linary[Index - 1] = sktvisarga) and (Linary[Index + 1] in Ku + Pu) and (Index > 2) then				if (Linary[Index - 2] = skta) then					if (Pada2 = 'kAra') or (Pada2 = 'kAma') or (Pada2 = 'kaMsa') or (Pada2 = 'kumBa') or (Pada2 = 'kumBI') or (Pada2 = 'pAtra') or (Pada2 = 'kuSA') or (Pada2 = 'karRI') then						if not ((Pada1 = 'svar') or (Pada1 = 'antar') or (Pada1 = 'prAtar') or (Pada1 = 'punar') or (Pada1 = 'sanutar') or (Pada1 = 'hyas') or (Pada1 = 'Svas') or (Pada1 = 'avas') or (Pada1 = 'aDas')) and not Uttarapada then	{miTas, namas, (tiraskAra by 8.3.42.  ?avaskara, namaskAra?) krtvasuc, suc, i.e. not avyaya}							Linary[Index - 1] := skts;		end;	{atahkrkamikamsa}		procedure stohscunascuh;	{8.4.40.  stoH ScunA ScuH}			var				Isthana: sthanatype;				Iyatna: yatnatype;		begin		if (Linary[Index - 1] in Tu + [skts]) and (Linary[Index + 1] in Cu + [sktsch]) then begin			identify(Linary[Index - 1], Isthana1, Iyatna1);			Linary[Index - 1] := Soundary[italavya, Iyatna1];			end		else if (Linary[Index - 1] in Cu + [sktsch]) and (Linary[Index + 1] = skts) then begin			Linary[Index + 1] := sktsch;			if (Index + 2 < linmax) then				if Linary[Index + 2] = skts then					Linary[Index + 1] := sktsch;			end		else if (Linary[Index - 1] in Cu) and (Linary[Index + 1] in Tu) then begin	{8.4.44.  SAt. (na, toH)}			identify(Linary[Index + 1], Isthana2, Iyatna2);			Linary[Index + 1] := Soundary[italavya, Iyatna2];			if (Index + 2 < linmax) then				if Linary[Index + 2] in Tu + [skts] then begin					identify(Linary[Index + 2], Isthana, Iyatna);					Linary[Index + 2] := Soundary[italavya, Iyatna];					end;			end;		end;	{stohscunascuh}		procedure stunastuh;	{8.4.41.  zwunA zwuH}			var				Isthana: sthanatype;				Iyatna: yatnatype;		begin		if ((Linary[Index - 1] = sktsh) and (Linary[Index + 1] in Tu + [skts])) or ((Linary[Index - 1] in Retrotu) and (Pada2 = 'nAm')) then begin	{8.4.42.  na padAntAwworanAm}			identify(Linary[Index + 1], Isthana2, Iyatna2);			Linary[Index + 1] := Soundary[imurdhanya, Iyatna2];			if (Index + 2 < linmax) then				if Linary[Index + 2] in Tu + [skts] then begin					identify(Linary[Index + 2], Isthana, Iyatna);					Linary[Index + 2] := Soundary[imurdhanya, Iyatna];					end;			end		else if ((Linary[Index - 1] in Tu) and (Linary[Index + 1] in Retrotu)) or ((Linary[Index - 1] = skts) and (Linary[Index + 1] in Retrotu + [sktsh])) then begin	{8.4.43.  toH zi. (na)}			identify(Linary[Index - 1], Isthana1, Iyatna1);			Linary[Index - 1] := Soundary[imurdhanya, Iyatna1];			end;		end;	{stunastuh}		procedure anusvarasya;	{8.4.59.  vA padAntasya (anusvArasya yayi parasavarRaH 58).}		begin	{don't exercise the option for semivowels (yan) just now}		if (Linary[Index - 1] = sktanusvara) and (Linary[Index + 1] in Yay - Yan) then begin			identify(Linary[Index + 1], Isthana2, Iyatna2);			Linary[Index - 1] := Soundary[Isthana2, isparsa5];			end;		end;	{anusvarasya}		procedure torli;	{8.4.60.  tor li}		begin		if (Linary[Index - 1] in Tu) and (Linary[Index + 1] = sktl) then begin			identify(Linary[Index - 1], Isthana1, Iyatna1);			Linary[Index - 1] := sktl;			if Iyatna1 = isparsa5 then begin				insertary(sktnasalization, Linary, Index - 1, NoSpace);				if NoSpace then begin					Error := 2;					exit(sandhi);					end;				Index := Index + 1;				end;			end;		end;	{torli}		procedure jhayoho;	{8.4.62.  jhayo ho 'nyatarasyAm}		begin		if (Linary[Index - 1] in Jhay) and (Linary[Index + 1] = skth) then begin			identify(Linary[Index - 1], Isthana1, Iyatna1);			Linary[Index + 1] := Soundary[Isthana1, isparsa4];			end;		end;	{jhayoho}		procedure saschoti;	{8.4.63.  SaS cho 'wi. (jhayaH 62, anyatarasyAm 62}		begin		if (Linary[Index - 1] in Jhay) and (Index + 2 < linmax) then			if (Linary[Index + 1] = sktsch) and (Linary[Index + 2] in At) then{vt. chatvamamIti vaktavyam:  Am instead of At.  tacchlokena, tacchmaSruRA}				Linary[Index + 1] := sktch;		end;	{saschoti}		procedure yaronunasike;	{8.4.45.  yaro 'nunAsike 'nunAsiko vA. (padAnta 42)}		begin		identify(Linary[Index + 1], Isthana2, Iyatna2);{if (Linary[Index - 1] in Yar) and (Index + 2 < linmax) then if (Iyatna2 = isparsa5) or (Linary[Index + 2] = sktanunasika) then}{we wont exercise the nasalized option for the semivowels y, v and l; just for the stops}		if (Linary[Index - 1] in Jhay) and (Iyatna2 = isparsa5) then begin			identify(Linary[Index - 1], Isthana1, Iyatna1);			Linary[Index - 1] := Soundary[Isthana1, isparsa5];			end;		end;	{yaronunasike}		procedure kharica;	{8.4.55.  khari ca. (jhalAm 53, car 54)}		begin{there is no final  'h' after jhalAm jaSo 'nte, but there is skts by 8.3.34 visarjanIyasya saH}{and sktsch and sktsh by 8.4.40-41 stoH ScunA scuH, zwunA zwuH so must exclude Sar}		if (Linary[Index - 1] in Jhay) then begin	{jhay=jhal-Sar}			identify(Linary[Index - 1], Isthana1, Iyatna1);			if (Linary[Index + 1] in Khar + Linend) then	{8.4.56.  vavasane}				Linary[Index - 1] := Soundary[Isthana1, isparsa1]			end;		end;	{kharica}		procedure idudeddvivacanampragrhyam;	{1.1.11. IdUdeddvivacanam pragfhyam}		begin		Pragrhya := false;		if External then			case Linary[Index - 1] of			sktii: 				if (Pada1 = 'amI') or (Pada1 = 'aDiparI') or (Pada1 = 'aBipratI') or (Pada1 = 'manasI') then					Pragrhya := true;			sktuu: 				if (Pada1 = 'amU') then	{1.1.12.  adaso mAt}					Pragrhya := true;			skte: 				if (Pada1 = 'SAlInakOpIne') or (Pada1 = 'uBe') then					Pragrhya := true;			skto: 				if (Pada1 = 'Aho') or (Pada1 = 'utAho') then	{1.1.15. ot}					Pragrhya := true;			otherwise			end;	{case}		end;	{pragrhya}	begin	{sandhi}	NxtUttarapada := false;	PurvaPada := '';	Pada1 := '';	Pada2 := '';	IPrev := 0;	Index := nxtposary(Padbound, FldChr, Linary, 2);	{the first character in Linary should not be a word boundary}	while Index > 0 do begin	{while a padbound character is found}		EkahPurvaParayoh := false;{PurvaPada, Pada1, Pada2}		Uttarapada := false;		if NxtUttarapada then			Uttarapada := true;	{Pada1 is an uttarapada}		NxtUttarapada := false;		PurvaPada := Pada1;		if IPrev = 0 then begin	{first Pada1 in Linary}			if Compound then				IPrev := lastposary(space, Linary, Index - 1);			Pada1 := substrary(Linary, IPrev + 1, Index - 1)			end	{first Pada1 in Linary}		else if External then	{we been through here before so}			Pada1 := Pada2		else	{padbound=hyphen}			Pada1 := NxtPada1;		Inext := nxtposary(Padbound, FldChr, Linary, Index + 1);		if Inext = 0 then	{not found so last word}			Inext := lengthary(Linary) + 1;		if External then			Pada2 := substrary(Linary, Index + 1, Inext - 1)		else begin	{for compound, Pada2, NxtPada1}			Inextsp := nxtposary(space, FldChr, Linary, Index + 1);			if (Inextsp > 0) and (Inextsp < Inext) then				Pada2 := substrary(Linary, Index + 1, Inextsp - 1)			else				Pada2 := substrary(Linary, Index + 1, Inext - 1);	{now the next Pada1 when padbound=hyphen}			IPrevSpace := lastposary(space, Linary, Inext - 1);			if IPrevSpace > Index then				NxtPada1 := substrary(Linary, IPrevspace + 1, Inext - 1)			else begin				NxtPada1 := Pada2;				NxtUttarapada := true;				end;			end;	{Pada2, NxtPada1 hyphen}	{end of PurvaPada, Pada1, Pada2}{determine whether Pada1 is an upasarga}		Upasarga := false;		if External and (Pada1 = 'ut') then			Pada1 := 'ud';		if Pada1 = 'api' then	{more likely karmapravacanIya than upasarga}		else			for I := 1 to pradimax do				if Pada1 = Pradi[I] then begin					Upasarga := true;					leave;					end;{stem final sound changes for compound sandhi and some special sandhi for grammatical technical terms}		sandhiPrep(Linary, Index, PurvaPada, Pada1, Pada2, NoStoh, NoKNam, Exception, Pronoun, OtherCloseSandhi);		if Exception then			goto 7000;	{skip sandhi}		if Upasarga and CloseUpasargaSandhi then			OtherCloseSandhi := true;	{initialized in sandhiPrep}{sandhi subroutines:  within compound and following an upasarga closer sandhi is observed when an option is allowed}{otherwise (between syntactic units) looser sandhi is observed}		idudeddvivacanampragrhyam;	{kosher exceptions to sandhi}		if Pragrhya then			goto 7000;	{skip sandhi}		if (Linary[Index - 1] = sktvisarga) then			visargaprep;		identify(Linary[Index - 1], Isthana1, Iyatna1);		identify(Linary[Index + 1], Isthana2, Iyatna2);{must precede 8.4.40.  stoH ScunA ScuH}		checa;	{6.1.73.  che ca}		anmanosca;	{6.1.74.  ANmANoSca (che 73, tuk 71)}		if (TukPadantat) then			padantadva;	{6.1.76.  padAntAdvA (dIrghAt 75, che 73, tuk 71)}{must precede vowel sandhi}		if (Linary[Index - 1] in [sktn, sktsh, skts]) then begin			if Pronoun then				etattadohsulopo;	{6.1.132.  etattadoH sulopo 'kor anaYsamAse hali}			amnarudharavar;	{8.2.70.  amnarUdharavarityubhayathA chandasi}			sasajusoruh;	{8.2.66.  sasajuzo ruH}			if not NoStoh then	{exception in 63110}				ahan;	{8.2.68.  ahan}			atororhasica;	{6.1.13.  ato ror aplutad aplute.  6.1.14.  haSi ca.  Must precede 6.1.109.  eNaH padAntAd ati}			end;		if (Linary[Index - 1] in Ac) and (Linary[Index + 1] in Ac) then			acsandhi		else if (Linary[Index - 1] in Hal + [ru]) and (Linary[Index + 1] in Al + Linend) then begin			jhalamjasonte;	{8.2.39.  jhalAM jaSo 'nte}			naschavyaprasan;	{8.3.7.  naS chavy apraSAn}			rori(Dhralopa);	{8.3.14.  ro ri}			dhralope;	{6.3.111.  qhralope pUrvasya dIrgho 'RaH}			bhobhago;	{8.3.17.  bhobhagoaghoapUrvasya yo 'Si}			kharavasanayor;	{8.3.15.  kharavasAnayor visarjanIyaH}			otogargyasya;	{8.3.20.  oto gArgyasya.  This cannot precede vowel sandhi}			monusvarah;	{8.3.23.  mo 'nusvAraH}			if not NoKNam then				namohrasvad;	{8.3.32.  Namo hrasvAd aci NamuR nityam}			visarjaniyasyasah;	{8.3.34.  visarjanIyasya saH}			if ScharSchari then				vasari;	{8.3.36.  vA Sari}	{8.3.41, 8.3.45 and 8.3.46 are apavAdas of 8.3.37 so they must precede it}			idudupadhasya;	{8.3.41.  idudupadhasya cApratyayasya (kupvoH 37, iRaH zaH 39}			nityamsamase;	{8.3 .45. nitya samAse 'nutarapadasthasya}			atahkrkamikamsa;	{8.3.46.  ataH kfkamikaMsakumbhapAtrakuSAkarRIzvanavyayasya}			if XkXpKupvoh then				kupvohXkXpau;	{8.3.37.  kupvoH XkXpau ca (khari 15).}			if not NoStoh then begin				stohscunascuh;	{8.4.40.  stoH ScunA ScuH}				stunastuh;	{8.4.41.  zwunA zwuH}				end;			torli;	{8.4.60.  tor li}			if ChAti then				saschoti;	{8.4.63.  SaS cho 'wi. (jhayaH 62, anyatarasyAm 62}			jhayoho;	{8.4.62.  jhayo ho 'nyatarasyAm}			kharica;	{8.4.55.  khari ca}			if ParaSavarna or OtherCloseSandhi then				anusvarasya;	{8.4.59.  vA padAntasya (anusvArasya yayi parasavarRaH 58).}			end;		if (Linary[Index - 1] in Hal) and (Linary[Index + 1] in Al) then begin	{must follow vowel sandhi}			lopahsakalyasya;	{8.3.19.  lopaH SAkalyasya.  Must follow 6.1.78.  eco 'yavAyAvaH}{If made to include semivowels, 8.4.45 must follow 8.3.19-20.  In present form it needn't.}			if Anunasika or OtherCloseSandhi then				yaronunasike;	{8.4.45.  yaro 'nunAsike 'nunAsiko vA. (padAnta 42)}			end;7000:{get rid of the space between words}		if EkahPurvaParayoh then begin		{EkahPurvaParayoh set in acsandhi in subroutines: akahsavarnedirghah, adgunah, vrddhireci}{do the same steps if two padbounds in a row because last sandhi eliminated single char word}			deletary(Linary, Index);			Index := Index - 1;	{the search for the next padbound begins at Index+1}			end		else if (Index > 1) and Despace then			if (Linary[Index - 1] in Hal) then	{Removed "or Upasarga"}				deletary(Linary, Index);		if Linary[Index] = hyphen then begin			deletary(Linary, Index);			Index := Index - 1;			end;		IPrev := Index;		Index := nxtposary(Padbound, FldChr, Linary, Index + 1);	{find the next pada boundary}		end;	{conclude while loop when padbound character is not found (Index=0)}	end;	{sandhi}end.	{sandhiline}